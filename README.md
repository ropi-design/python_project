# 📊 InstaInsight - Instagram エンゲージメント率分析アプリ

Instagram 投稿のエンゲージメント率（ER）を分析・可視化する Flask アプリケーションです。

## 🎯 機能

- **CSV ファイル読み込み**: 投稿データを CSV から読み込み
- **ER 自動計算**: いいね・コメント・保存数からエンゲージメント率を自動計算
- **KPI ダッシュボード**: 主要指標をカード形式で表示
- **ランキング表示**: 上位・下位の投稿をランキング形式で表示
- **時間分析**: 時間帯別・曜日別のエンゲージメント率分析
- **ハッシュタグ分析**: ハッシュタグ別のパフォーマンス分析
- **内容分析**: 投稿内容に基づくエンゲージメント改善提案
- **エンゲージメント指標**: フォロワー数・インプレッション数・リーチ数ベースの詳細分析
- **美しいグラフ**: Plotly を使用したインタラクティブな可視化

## 🚀 セットアップ

### 1. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 2. アプリケーションの起動

```bash
python app.py
```

ブラウザで `http://127.0.0.1:3000` が自動的に開きます。

## 📊 必須 CSV 列

以下の列が必須です：

| 列名                | 説明                 | 例               |
| ------------------- | -------------------- | ---------------- |
| `post_id`           | 投稿 ID              | POST001          |
| `posted_at`         | 投稿日時             | 2025-01-01 19:30 |
| `likes`             | いいね数             | 120              |
| `comments`          | コメント数           | 15               |
| `saves`             | 保存数               | 20               |
| `followers_at_post` | 投稿時のフォロワー数 | 8200             |

## 🔍 任意 CSV 列

以下の列は任意ですが、より詳細な分析が可能になります：

| 列名          | 説明                         | 例             |
| ------------- | ---------------------------- | -------------- |
| `reach`       | リーチ数                     | 4500           |
| `impressions` | インプレッション数           | 6000           |
| `media_type`  | メディアタイプ               | photo          |
| `caption`     | キャプション                 | 素敵な海の景色 |
| `hashtags`    | ハッシュタグ（カンマ区切り） | #夏 #海 #旅行  |

## 📁 プロジェクト構成

```
python_project/
  ├─ app.py                   # Flask アプリケーションのメインファイル
  ├─ utils/
  │   ├─ data_loader.py       # CSV読み込み・前処理
  │   ├─ analysis.py          # ER計算・集計ロジック・内容分析
  │   └─ chart_generator.py   # Plotlyグラフ作成
  ├─ templates/
  │   ├─ base.html            # ベースHTMLテンプレート
  │   ├─ index.html           # ホームページ
  │   └─ analysis.html        # 分析結果表示ページ
  ├─ static/
  │   ├─ css/
  │   │   └─ style.css        # スタイルシート
  │   └─ js/
  │       └─ main.js          # JavaScript
  ├─ data/
  │   └─ insta_insight_sample_data.csv  # テスト用サンプルデータ
  ├─ requirements.txt         # 依存関係
  └─ README.md               # このファイル
```

## 🎮 使い方

1. **CSV ファイルの準備**: 上記の必須列を含む CSV ファイルを準備
2. **ファイルアップロード**: ホームページから CSV ファイルをアップロード
3. **分析結果確認**:
   - **概要**: KPI カードで主要指標を確認
   - **ランキング**: 上位・下位の投稿をランキング形式で表示
   - **時間分析**: 時間帯別・曜日別のエンゲージメント率分析
   - **ハッシュタグ分析**: ハッシュタグ別のパフォーマンス分析
   - **内容分析**: 投稿内容に基づくエンゲージメント改善提案
   - **エンゲージメント指標**: フォロワー数・インプレッション数・リーチ数ベースの詳細分析

## 🔮 今後の拡張予定

### Graph API 連携（無料、プロアカウント必須）

以下の機能を将来的に実装予定です：

- **投稿一覧取得**: `fetch_media_list()` 関数
- **投稿インサイト取得**: `fetch_media_insights(media_id)` 関数
- **リアルタイムデータ**: 最新の投稿データを自動取得
- **定期更新**: スケジュールされたデータ更新

### 環境変数設定

Graph API 連携時は以下の環境変数を設定してください：

```bash
# .env ファイルを作成
FACEBOOK_APP_ID=your_app_id_here
FACEBOOK_APP_SECRET=your_app_secret_here
INSTAGRAM_BUSINESS_ACCOUNT_ID=your_instagram_account_id_here
FACEBOOK_ACCESS_TOKEN=your_access_token_here
FACEBOOK_API_VERSION=v18.0
```

## ✨ 新機能

### 内容分析機能

- 投稿内容に基づくエンゲージメント改善提案
- 高エンゲージメント・低エンゲージメントの内容パターン分析
- 具体的な改善提案の表示

### エンゲージメント指標

- **フォロワー数ベース**: （いいね＋コメント＋保存）÷ フォロワー数 × 100
- **インプレッション数ベース**: （いいね＋コメント＋保存）÷ インプレッション数 × 100
- **リーチ数ベース**: エンゲージメント数 ÷ リーチ数 × 100

## 🛠️ 技術スタック

- **Python 3.8+**: メイン言語
- **Flask**: Web アプリケーションフレームワーク
- **Jinja2**: HTML テンプレートエンジン
- **Pandas**: データ処理・分析
- **Plotly**: インタラクティブなグラフ作成
- **NumPy**: 数値計算
- **Bootstrap**: レスポンシブ UI フレームワーク

## 📝 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 🤝 コントリビューション

バグ報告や機能要望、プルリクエストを歓迎します！

---

**注意**: このアプリケーションは Instagram の公式 API ではありません。データの使用には Instagram の利用規約を遵守してください。
